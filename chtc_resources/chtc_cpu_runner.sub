############################################################################
# 
# Condor job that runs on the GPU server gitter-gpu1.chtc.wisc.edu
# in the CHTC pool.  Submit from submit-5.chtc.wisc.edu or the submit
# node CHTC specified when user account was created.
# Based on http://chtc.cs.wisc.edu/helloworld.shtml
#                                                                       
############################################################################

#first argument is path to python jobs txt file
arguments = chtc_resources/cpu_jobs/cpu_jobs_1.txt
transfer_output_files = job_results

Executable = chtc_runner.sh
Universe = vanilla
initialdir = /mnt/ws/virology/shared/lab_folders/GitterLab/virtual-screening/job_results/

# Include the cluster id and process id that are set at runtime
Log = /mnt/ws/virology/shared/lab_folders/GitterLab/virtual-screening/chtc_logs/chtc_cpu_job.$(Cluster).log
Error = /mnt/ws/virology/shared/lab_folders/GitterLab/virtual-screening/chtc_logs/chtc_cpu_job.$(Cluster)_$(Process).err
Output = /mnt/ws/virology/shared/lab_folders/GitterLab/virtual-screening/chtc_logs/chtc_cpu_job.$(Cluster)_$(Process).out

# File transfer generally needed for non-trivial jobs
# See http://chtc.cs.wisc.edu/file-availability.shtml
# "By default, the submit file executable, output, and error files are
# ALWAYS transferred"
Should_transfer_files = YES
When_to_transfer_output = ON_EXIT

# Specify the resources required
Request_cpus = 1
Request_memory = 16GB
Request_disk = 6GB

# Special requirements to run jobs on the GPU server
# The server can run jobs that do not request a GPU but these are run
# at a lower priority and will be pre-empted by jobs from the group
# that request GPUs
+AccountingGroup = "BMI_Gitter"

# Allow flocking to the larger CHTC pool
+WantFlocking = true

# Copy environment variables that are set dynamically by HTCondor
# Could also pass these as command line arguments
Environment = "cluster=$(Cluster) process=$(Process) runningon=$$(Name)"
getenv = true

Queue 2

#END
