language: python

matrix:
  include:
    - python: 2.7
      env: KERAS_BACKEND=theano

notifications:
  email: false

before_install:
  - wget https://repo.continuum.io/archive/Anaconda2-4.3.0-Linux-x86_64.sh -O anaconda.sh
  - chmod 777 *
  - bash anaconda.sh -b -p $HOME/anaconda
  - export PATH="$HOME/anaconda/bin:$PATH"
  - conda env create -n pria_env -f conda_virtual_env.yml
  - source activate pria_env

install:
  - pip install -e .

script:
  - python -c "import keras.backend"
  - sed -i -e 's/"backend":[[:space:]]*"[^"]*/"backend":\ "'$KERAS_BACKEND'/g' ~/.keras/keras.json;
  - echo -e "Running tests with the following config:\n$(cat ~/.keras/keras.json)"
